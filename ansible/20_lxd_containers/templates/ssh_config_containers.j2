# Thinkube Cluster SSH Configuration
# Generated by Ansible on {{ ansible_date_time.date }}
# Includes Baremetal Hosts and LXD Containers

# ==== Baremetal Hosts ====
{% for host in groups['baremetal'] %}
Host {{ host }}
  HostName {{ hostvars[host]['ansible_host'] }}
  User {{ ansible_user_id }}
  IdentityFile {{ ansible_user_dir }}/.ssh/thinkube_cluster_key
  StrictHostKeyChecking no
  UserKnownHostsFile /dev/null

{% endfor %}

# ==== LXD Containers ====
{% for host in groups['lxd_containers'] | default([]) %}
{% if hostvars[host]['lan_ip'] is defined %}
Host {{ host }}
  HostName {{ hostvars[host]['lan_ip'] }}
  User thinkube
  IdentityFile {{ ansible_user_dir }}/.ssh/thinkube_cluster_key
  StrictHostKeyChecking no
  UserKnownHostsFile /dev/null

{% endif %}
{% endfor %}

# Default settings for all hosts
Host *
  ServerAliveInterval 60
  ServerAliveCountMax 30
  ForwardAgent yes